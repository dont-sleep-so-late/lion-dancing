import{a as t,t as e,c as a,f as l,p as o,g as n,h as i,e as c,r as s,w as r,o as u,n as d,j as v,af as p,m as f,ag as m,s as I,u as y,v as g,B as h,z as k,y as S,x as C,M as b,A as z,G as _,C as x,ah as w,H as B,K as j,I as T,J as E,ai as N,_ as $,b as D,d as H,D as A,T as M,E as P}from"./index-14661dcc.js";import{u as X}from"./index.aa7ff014.js";import{i as F}from"./is-number.8a96c634.js";const G=Symbol("noticeBar"),J=$(I({__name:"column-notice-bar",setup(t){const e=y("column-notice-bar"),{data:l,interval:o,play:n,vertical:i,noticeClickEvent:s}=(()=>{const t=c(G,null);return{data:a((()=>p(null==t?void 0:t.data,[]))),interval:a((()=>p(null==t?void 0:t.speed,3e3))),play:a((()=>p(null==t?void 0:t.play,!0))),vertical:a((()=>"vertical"===(null==t?void 0:t.direction))),noticeClickEvent:e=>{null==t||t.click(e)}}})();return(t,a)=>{const c=N,r=w,u=B;return g(),h(u,{class:x([z(e).b()])},{default:k((()=>[S(r,{class:x([z(e).e("swiper")]),autoplay:z(n),interval:z(o),vertical:z(i),circular:""},{default:k((()=>[(g(!0),C(_,null,b(z(l),((t,a)=>(g(),h(c,{key:a,class:x(["tn-text-ellipsis-1",[z(e).e("swiper-item")]]),onClick:j((t=>z(s)(a)),["stop"])},{default:k((()=>[T(E(t),1)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["class","autoplay","interval","vertical"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-cb9c67b9"]]),K=$(I({__name:"row-notice-bar",setup(t){const e=y("row-notice-bar"),{componentId:l,componentTextId:o,data:n,animationData:i,noticeClickEvent:I}=(()=>{const t=f(),e=c(G,null),{getSelectorNodeInfo:l}=X(t),o=`trnb-${v()}`,n=`${o}-text`,i=a((()=>{var t;return(null==(t=null==e?void 0:e.data)?void 0:t.length)?e.data.join(" "):""})),I=a((()=>p(null==e?void 0:e.speed,80)));let y=0,g=null;const h=s(null);let k=null;const S=()=>{g=m({duration:y,timingFunction:"linear"}),g.translateX(-(_+x)+Number(10*Math.random())).step({duration:y}),g.translateX(0).step({duration:0}),h.value=g.export()},C=()=>{S(),k=setInterval((()=>{S()}),y+80)},b=()=>{g=null,h.value=null,k&&(clearInterval(k),k=null)};r((()=>null==e?void 0:e.play),(t=>{t?C():b()}));let z=0,_=0,x=0;const w=async()=>{try{const t=await l(`#${o}`),a=await l(`#${n}`);z=0,_=t.width||0,x=a.width||0,y=(_+x)/I.value*1e3,(null==e?void 0:e.play)&&(null==e?void 0:e.autoPlay)&&setTimeout((()=>{C()}),50)}catch(t){if(z>10)return void(z=0);z++,setTimeout((()=>{w()}),150)}};return r((()=>null==e?void 0:e.speed),(()=>{b(),w()})),u((()=>{d((()=>{w()}))})),{componentId:o,componentTextId:n,data:i,animationData:h,noticeClickEvent:()=>{null==e||e.click(0)}}})();return(t,a)=>{const c=B;return g(),h(c,{id:z(l),class:x([z(e).b()]),animation:z(i),onClick:j(z(I),["stop"])},{default:k((()=>[S(c,{id:z(o),class:x([z(e).e("value")])},{default:k((()=>[T(E(z(n)),1)])),_:1},8,["id","class"])])),_:1},8,["id","class","animation","onClick"])}}}),[["__scopeId","data-v-4f782577"]]),q=$(I({__name:"notice-bar",props:D({show:{type:Boolean,default:!0},data:{type:H(Array),default:()=>[]},bgColor:String,textColor:String,fontSize:String,leftIcon:String,leftIconColor:String,leftIconSize:String,rightIcon:String,rightIconColor:String,rightIconSize:String,pause:Boolean,autoPlay:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},loop:{type:Boolean,default:!0},speed:Number,autoHide:{type:Boolean,default:!0}}),emits:{click:t=>F(t),"left-icon-click":()=>!0,"right-icon-click":()=>!0},setup(c,{emit:s}){const r=c,u=y("notice-bar"),{showNoticeBar:d,leftIconClick:v,rightIconClick:p}=((t,e)=>{const l=a((()=>t.show&&!(t.autoHide&&0===t.data.length))),c=a((()=>!t.pause));return o(G,n({...i(t),play:c,click:t=>{e("click",t)}})),{showNoticeBar:l,leftIconClick:()=>{e("left-icon-click")},rightIconClick:()=>{e("right-icon-click")}}})(r,s),{commonClass:f,commonStyle:m}=(o=>{const[n,i]=t(e(o,"bgColor"),"bg"),[c,s]=t(e(o,"textColor"),"text"),[r,u]=t(e(o,"leftIconColor"),"text"),[d,v]=t(e(o,"rightIconColor"),"text");return{commonClass:a((()=>(t="normal")=>{const e=[];return"normal"===t?(n.value&&e.push(n.value),c.value&&e.push(c.value)):"leftIcon"===t?r.value&&e.push(r.value):"rightIcon"===t&&d.value&&e.push(d.value),e.join(" ")})),commonStyle:a((()=>(t="normal")=>{const e={};return"normal"===t?(n.value||(e.backgroundColor=i.value||"var(--tn-color-white)"),s.value?e.color=s.value:n.value||c.value||(e.color="var(--tn-text-color-primary)"),o.fontSize&&(e.fontSize=l(o.fontSize))):"leftIcon"===t?(r.value||(e.color=u.value||"var(--tn-text-color-primary)"),o.fontSize&&(e.fontSize=l(o.fontSize)),o.leftIconSize&&(e.fontSize=l(o.leftIconSize))):"rightIcon"===t&&(d.value||(e.color=v.value||"var(--tn-text-color-secondary)"),o.fontSize&&(e.fontSize=`calc(${l(o.fontSize)} * 1.2)`),o.rightIconSize&&(e.fontSize=l(o.rightIconSize))),e}))}})(r);return(t,e)=>{const a=B;return z(d)?(g(),h(a,{key:0,class:x([z(u).b(),z(f)("normal")]),style:A(z(m)("normal"))},{default:k((()=>[t.leftIcon?(g(),h(a,{key:0,class:x([z(u).e("left-icon"),z(f)("leftIcon")]),style:A(z(m)("leftIcon")),onClick:j(z(v),["stop"])},{default:k((()=>[S(M,{name:t.leftIcon},null,8,["name"])])),_:1},8,["class","style","onClick"])):P("",!0),S(a,{class:x([z(u).e("content")])},{default:k((()=>["vertical"===t.direction||"horizontal"===t.direction&&!t.loop?(g(),h(J,{key:0})):(g(),h(K,{key:1}))])),_:1},8,["class"]),t.rightIcon?(g(),h(a,{key:1,class:x([z(u).e("right-icon"),z(f)("rightIcon")]),style:A(z(m)("rightIcon")),onClick:j(z(p),["stop"])},{default:k((()=>[S(M,{name:t.rightIcon},null,8,["name"])])),_:1},8,["class","style","onClick"])):P("",!0)])),_:1},8,["class","style"])):P("",!0)}}}),[["__scopeId","data-v-27efb1f2"]]);var L=(t=>(t.select="select",t.custom="custom",t))(L||{});export{L as C,q as T};

import{a1 as e,a2 as t,b as a,a3 as l,i as n,u as s,a as o,t as r,c as u,r as i,w as c,n as d,s as h,v as p,B as v,z as g,y as m,A as C,C as f,D as y,F as b,T as k,E as B,I as x,J as _,x as w,U as I,K as S,G as j,H as V,a4 as E,_ as D,a5 as H,a6 as T,a7 as F,a8 as N,a0 as z,a9 as A,M as U,O}from"./index-14661dcc.js";import{U as $,C as q}from"./event.66482612.js";import{T as L}from"./index.b87bd137.js";import{A as P}from"./index.8db9fb29.js";const R=a({modelValue:{type:String,default:""},placeholder:{type:String,default:"请输入搜索内容"},placeholderIcon:{type:String,default:"search"},shape:{type:String,values:["square","round"],default:"square"},size:l,textColor:String,placeholderColor:String,textAlign:{type:String,values:["left","center","right"],default:"left"},border:{type:Boolean,default:!0},borderColor:String,focus:Boolean,disabled:Boolean,clearable:{type:Boolean,default:!0},searchButton:{type:Boolean,default:!0},searchButtonText:{type:String,default:"搜 索"},searchButtonTextColor:String,searchButtonBgColor:String,throllte:{type:Boolean,default:!0},throllteTime:{type:Number,default:1e3}}),G=(a,l)=>{const n=i(!a.modelValue),s=i(a.modelValue);c((()=>a.modelValue),(e=>{a.modelValue!==s.value&&(s.value=e,n.value=!e)}));const o=i(!1);a.focus&&(n.value=!1,d((()=>{o.value=!0})));const r=()=>{l($,s.value),d((()=>{l(q,s.value),l("input",s.value)}))},u=a.throllte?function(a,l,n){let s=!0,o=!0;if("function"!=typeof a)throw new TypeError("Expected a function");return e(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),t(a,l,{leading:s,maxWait:l,trailing:o})}(r,a.throllteTime):r,h=t((()=>{a.disabled||l("search",s.value)}),250);return{showPlaceholder:n,inputValue:s,inputFocus:o,searchBoxClickEvent:()=>{l("click"),a.disabled||(n.value=!1,o.value=!0)},inputFocusEvent:()=>{l("focus")},inputBlurEvent:()=>{n.value=!s.value,o.value=!1,l("blur")},inputValueEvent:u,clearClickEvent:()=>{s.value="",l($,""),d((()=>{o.value=!0,l(q,""),l("clear")}))},searchBtnClickEvent:h}},J=D(h({__name:"search-box",props:R,emits:{[$]:e=>n(e),[q]:e=>n(e),input:e=>n(e),click:()=>!0,focus:()=>!0,blur:()=>!0,search:e=>n(e),clear:()=>!0},setup(e,{emit:t}){const a=e,{showPlaceholder:l,inputValue:n,inputFocus:i,searchBoxClickEvent:c,inputFocusEvent:d,inputBlurEvent:h,inputValueEvent:D,clearClickEvent:H,searchBtnClickEvent:T}=G(a,t),{ns:F,searchBoxClass:N,searchBoxStyle:z,placeholderClass:A,placeholderStyle:U,searchButtonClass:O,searchButtonStyle:$}=(e=>{const t=s("search-box"),[a,l]=o(r(e,"textColor"),"text"),[n,i]=o(r(e,"borderColor"),"border"),[c,d]=o(r(e,"placeholderColor"),"text"),[h,p]=o(r(e,"searchButtonTextColor"),"text"),[v,g]=o(r(e,"searchButtonBgColor"),"bg"),m=u((()=>{const l=[t.b(),t.m(e.shape),t.is("no-search-btn",!e.searchButton),t.is("disabled",e.disabled)];return e.border&&(l.push(t.m("border")),n.value&&l.push(n.value)),e.size&&l.push(t.m(e.size)),a.value&&l.push(a.value),l.join(" ")})),C=u((()=>{const t={};return a.value||(t.color=l.value||"var(--tn-text-color-primary)"),e.border&&(n.value||(t.borderColor=i.value||"var(--tn-color-gray)")),t})),f=u((()=>{const a=[t.e("placeholder"),t.em("placeholder",e.textAlign)];return c.value&&a.push(c.value),a.join(" ")})),y=u((()=>{const e={};return c.value||(e.color=d.value||"var(--tn-text-color-secondary)"),e})),b=u((()=>{const e=[t.e("search-button")];return v.value&&e.push(v.value),h.value&&e.push(h.value),e.join(" ")})),k=u((()=>{const e={};return v.value||(e.backgroundColor=g.value||"var(--tn-color-primary)"),p.value?e.color=p.value:v.value||h.value||(e.color="var(--tn-color-white)"),e}));return{ns:t,searchBoxClass:m,searchBoxStyle:C,placeholderClass:f,placeholderStyle:y,searchButtonClass:b,searchButtonStyle:k}})(a);return(e,t)=>{const a=V,s=E;return p(),v(a,{class:f([C(N)]),style:y(C(z)),onClick:S(C(c),["stop"])},{default:g((()=>[m(a,{class:f([C(F).e("content")])},{default:g((()=>[C(l)?(p(),v(a,{key:0,class:f([C(A)]),style:y(C(U))},{default:g((()=>[b(e.$slots,"placeholder",{},(()=>[e.placeholderIcon?(p(),v(a,{key:0,class:f([C(F).e("placeholder-icon")])},{default:g((()=>[m(k,{name:e.placeholderIcon},null,8,["name"])])),_:1},8,["class"])):B("",!0),e.placeholder?(p(),v(a,{key:1,class:f([C(F).e("placeholder-text")])},{default:g((()=>[x(_(e.placeholder),1)])),_:1},8,["class"])):B("",!0)]),!0)])),_:3},8,["class","style"])):(p(),w(j,{key:1},[m(s,{modelValue:C(n),"onUpdate:modelValue":t[0]||(t[0]=e=>I(n)?n.value=e:null),class:f([C(F).e("input"),C(F).em("input",e.textAlign)]),focus:C(i),"confirm-type":"search",onFocus:C(d),onBlur:C(h),onInput:C(D),onConfirm:C(T)},null,8,["modelValue","class","focus","onFocus","onBlur","onInput","onConfirm"]),e.clearable&&C(n)?(p(),v(a,{key:0,class:f([C(F).e("clear-button")]),onClick:S(C(H),["stop"])},{default:g((()=>[m(k,{name:"close-fill"})])),_:1},8,["class","onClick"])):B("",!0)],64))])),_:3},8,["class"]),e.searchButton?(p(),v(a,{key:0,class:f([C(O)]),style:y(C($)),"hover-class":"tn-u-btn-hover","hover-stay-time":150,onClick:S(C(T),["stop"])},{default:g((()=>[b(e.$slots,"search",{},(()=>[x(_(e.searchButtonText),1)]),!0)])),_:3},8,["class","style","onClick"])):B("",!0)])),_:3},8,["class","style","onClick"])}}}),[["__scopeId","data-v-d25b03d6"]]),K={set(e,t){H(e,t)},get(e){try{const t=T(e);if(!t)return;return t}catch(t){return void console.error("获取数据缓存失败",t)}},remove(e){F(e)},clear(){N()}},M="searchHistory",W=D(h({__name:"index",setup(e){const{navbarHeight:t,searchValue:a,historyList:l,searchResult:n,navbarInitFinishHandle:s,searchConfirmHandle:o,historyClickHandle:r,clearHistory:u}=(()=>{const e=i(0),t=i(""),a=i([]),l=i([{id:"1",title:"我们是冠军！",desc:"我们是冠军！我们是冠军！我们是冠军！",mainImage:"https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/lionDancing/20240501164311.png",tag:"醒狮",viewCount:998,likeCount:100},{id:"2",title:"一个拥有醒狮文化的网站",desc:"喜欢醒狮的不了解一下?",mainImage:"https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/lionDancing/shuzhibaijian%20(3).jpg",tag:"醒狮周边",viewCount:467,likeCount:239},{id:"3",title:"教你敲鼓！",desc:"咚咚咚！咚咚咚！咚咚咚！！！！",mainImage:"https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/lionDancing/20240501164300.png",tag:"醒狮",viewCount:998,likeCount:100},{id:"4",title:"醒狮背后训练秘密曝光！",desc:"醒狮的秘密训练！",mainImage:"https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/lionDancing/20240501163457.png",tag:"醒狮训练",viewCount:467,likeCount:239},{id:"5",title:"醒狮国潮",desc:"醒狮小狮子，不来买一个吗！",mainImage:"https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/lionDancing/baijian.png",tag:"醒狮周边",viewCount:998,likeCount:100},{id:"6",title:"精美醒狮手机壳",desc:"喜欢3D模型的不了解一下?",mainImage:"https://cdn.jsdelivr.net/gh/dont-sleep-so-late/CDN/lionDancing/shoujike.jpg",tag:"醒狮周边",viewCount:467,likeCount:239}]),n=e=>{a.value.includes(e)||(a.value.length>=10&&a.value.pop(),a.value.unshift(e),K.set(M,a.value))};return z((()=>{const e=K.get(M);e&&(a.value=e)})),{searchValue:t,navbarHeight:e,historyList:a,searchResult:l,navbarInitFinishHandle:t=>{e.value=t.height},searchConfirmHandle:()=>{t.value&&n(t.value)},historyClickHandle:e=>{t.value=e},clearHistory:()=>{A({title:"提示",content:"确认清除搜索历史记录吗?",showCancel:!0,success:({confirm:e})=>{e&&(a.value=[],K.remove(M))}})}}})();return(e,i)=>{const c=O("TnNavbar"),d=V,h=O("TnButton");return p(),w(j,null,[m(c,{fixed:"","bg-color":"transparent","bottom-shadow":!1,placeholder:!1,onInitFinish:C(s)},null,8,["onInitFinish"]),m(d,{class:"search-page",style:y({paddingTop:`${C(t)+20}px`})},{default:g((()=>[m(d,{class:"search-operation"},{default:g((()=>[m(d,{class:"input"},{default:g((()=>[m(J,{modelValue:C(a),"onUpdate:modelValue":i[0]||(i[0]=e=>I(a)?a.value=e:null),"search-button":!1,shape:"round",size:"sm",onSearch:C(o)},null,8,["modelValue","onSearch"])])),_:1}),m(d,{class:"button"},{default:g((()=>[m(h,{"bg-color":"tn-blue",shape:"round",width:"150",height:"66",onClick:C(o)},{default:g((()=>[x(" 搜 索 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),C(l).length>0?(p(),v(d,{key:0,class:"history-list"},{default:g((()=>[m(L,{title:"最近搜索","sub-title":"","operation-title":"删除","operation-icon":"delete",onOperation:C(u)},null,8,["onOperation"]),m(d,{class:"content-wrapper"},{default:g((()=>[(p(!0),w(j,null,U(C(l),((e,t)=>(p(),v(d,{key:t,class:"history-item tn-gray-light_bg",onClick:S((t=>C(r)(e)),["stop"])},{default:g((()=>[x(" # "+_(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):B("",!0),C(n).length>0?(p(),v(d,{key:1,class:"search-result"},{default:g((()=>[m(L,{title:"搜索结果","sub-title":""},{operation:g((()=>[m(d)])),_:1}),m(d,{class:"content-wrapper"},{default:g((()=>[(p(!0),w(j,null,U(C(n),((e,t)=>(p(),v(d,{key:t,class:"result-item"},{default:g((()=>[m(P,{title:e.title,desc:e.desc,image:e.mainImage,tag:e.tag,"view-count":e.viewCount,"like-count":e.likeCount},null,8,["title","desc","image","tag","view-count","like-count"])])),_:2},1024)))),128))])),_:1})])),_:1})):B("",!0)])),_:1},8,["style"])],64)}}}),[["__scopeId","data-v-14447873"]]);export{W as default};

import{b as e,d as t,i as a,u as l,a as s,t as o,c as i,f as r,e as n,L as d,az as u,o as c,n as f,q as h,m as v,j as m,X as b,r as p,w as g,p as y,g as S,h as C,k as w,l as I,s as _,v as x,B as $,z as k,C as z,A as B,D as j,E as T,y as A,F,H as L,$ as N,_ as V,I as q,J as E,K as O}from"./index-2f3d7a21.js";import{U,C as W}from"./event.66482612.js";import{i as K}from"./is-number.22dedcb7.js";import{u as R}from"./index.a1a6e970.js";import{u as D}from"./index.cfcf8448.js";import{T as H}from"./badge.28cd7eaf.js";const J=Symbol("tabsContextKey"),X=e({color:String,activeColor:String,fontSize:String,activeFontSize:String}),G=e({...X,modelValue:{type:[String,Number],default:0},height:{type:String,default:"80rpx"},barWidth:{type:String,default:"40rpx"},bgColor:String,barColor:String,bottomShadow:{type:Boolean,default:!0},scroll:{type:Boolean,default:!0},bar:{type:Boolean,default:!0},activeBold:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},beforeSwitch:{type:t(Function)}}),M=e=>{const t=v(),{emit:a}=t,l=b(),{children:s,addChild:o,removeChild:r}=D(),{getSelectorNodeInfo:n}=R(t),d=`tt-${m()}`,u=`${d}-b`,h=i((()=>e.bar||!!l.bar)),_=p(-1),x={width:0,height:0,left:0},$={width:0,height:0,left:0},k=p(0),z=p(0),B=(t,o=!1)=>{_.value=t;const i=s.value.findIndex((e=>e.uid===t)),r=s.value[i].name??i;(t=>{if(!e.scroll&&!e.bar&&!l.bar)return;const a=s.value[t].elementRect;if((e.bar||l.bar)&&(k.value=a.left-x.left+(a.width-$.width)/2),e.scroll){const e=a.left-x.left-(x.width-a.width)/2;z.value=e<0?0:e}})(i),a(U,r),o&&a(W,r)};g((()=>e.modelValue),(e=>{(e=>{var t;if(void 0===e)return void B(s.value[0].uid);let a;"number"==typeof e&&(a=null==(t=s.value)?void 0:t[e]),a||(a=s.value.find((t=>t.name===e))),B(a?a.uid:s.value[0].uid)})(e)}));let j=0;const T=async()=>{try{const e=await n(`#${d}`);j=0,x.width=e.width||0,x.height=e.height||0,x.left=e.left||0}catch(e){if(j>10)return void(j=0);j++,setTimeout((()=>{T()}),150)}},A=async()=>{if(e.bar||l.bar)try{const e=await n(`#${u}`);j=0,$.width=e.width||0,$.height=e.height||0,$.left=e.left||0}catch(t){if(j>10)return void(j=0);j++,setTimeout((()=>{A()}),150)}};return c((()=>{f((()=>{T(),A()}))})),y(J,S({...C(e),items:s,activeUid:_,showBar:h,addItem:t=>{void 0!==e.modelValue&&-1===_.value&&(e.modelValue!==t.name&&e.modelValue!==s.value.length||f((()=>{B(t.uid)}))),o(t)},removeItem:r,setActiveItem:t=>{if(!e.beforeSwitch)return void B(t,!0);const a=s.value.findIndex((e=>e.uid===t)),l=e.beforeSwitch(a);[w(l),I(l)].includes(!0)&&(w(l)?l.then((e=>{e&&B(t,!0)})).catch((e=>{})):l&&B(t,!0))}})),{tabItems:s,componentId:d,barComponentId:u,barOffsetLeft:k,scrollLeft:z,showBar:h}},P=V(_({__name:"tabs",props:G,emits:{[U]:e=>a(e)||K(e),[W]:e=>a(e)||K(e)},setup(e){const t=e,{tabItems:a,componentId:n,barComponentId:d,barOffsetLeft:u,scrollLeft:c,showBar:f}=M(t),{ns:h,tabsClass:v,tabsStyle:m,barClass:b,barStyle:p}=(e=>{const t=l("tabs"),[a,n]=s(o(e,"bgColor"),"bg"),[d,u]=s(o(e,"barColor"),"bg"),c=i((()=>{const l=[t.b()];return e.bottomShadow&&l.push(t.m("bottom-shadow")),a.value&&l.push(a.value),l.join(" ")})),f=i((()=>{const t={};return a.value||(t.backgroundColor=n.value||"var(--tn-color-white)"),e.height&&(t.height=r(e.height),e.offsetTop&&(t.height=`calc(${t.height} + ${e.offsetTop}px)`)),t})),h=i((()=>{const e=[t.e("bar")];return d.value&&e.push(d.value),e.join(" ")})),v=i((()=>{const t={};return d.value||(t.backgroundColor=u.value||"var(--tn-color-primary)"),e.barWidth&&(t.width=r(e.barWidth)),t}));return{ns:t,tabsClass:c,tabsStyle:f,barClass:h,barStyle:v}})(t);return(e,t)=>{const l=L,s=N;return x(),$(l,{id:B(n),class:z([B(v)]),style:j(B(m))},{default:k((()=>[e.offsetTop?(x(),$(l,{key:0,class:z([B(h).e("top-placeholder")]),style:j({height:`${e.offsetTop}px`})},null,8,["class","style"])):T("",!0),A(s,{class:z([B(h).e("scroll-view")]),style:j({height:B(r)(e.height||"100%")}),"scroll-x":e.scroll,"scroll-with-animation":"","scroll-left":B(c)},{default:k((()=>[A(l,{class:z([B(h).e("container"),B(h).is("scroll",e.scroll),B(h).is("no-bar",!B(f))])},{default:k((()=>[F(e.$slots,"default",{},void 0,!0),e.bar||e.$slots.bar?(x(),$(l,{key:0,id:B(d),class:z([B(h).e("bar-container")]),style:j({left:`${B(u)}px`,opacity:""+(B(u)&&B(a).length?1:0)})},{default:k((()=>[F(e.$slots,"bar",{},(()=>[A(l,{class:z([B(b)]),style:j(B(p))},null,8,["class","style"])]),!0)])),_:3},8,["id","class","style"])):T("",!0)])),_:3},8,["class"])])),_:3},8,["class","style","scroll-x","scroll-left"])])),_:3},8,["id","class","style"])}}}),[["__scopeId","data-v-8c4e1f20"]]),Q=V(_({__name:"tabs-item",props:e({...X,name:{type:[String,Number]},title:{type:String,required:!0},badgeConfig:{type:t(Object),default:()=>({})},disabled:Boolean}),emits:{click:()=>!0},setup(e){const t=e,{componentId:a,isActive:o,hasBadge:b,itemClickEvent:p}=(e=>{const t=v(),{emit:a,uid:l}=t,s=`tti-${m()}`,o=n(J),{getSelectorNodeInfo:r}=R(t),d=i((()=>(null==o?void 0:o.activeUid)===l)),b=i((()=>!u(e.badgeConfig))),p={width:0,height:0,left:0};let g=0;const y=async()=>{try{const t=await r(`#${s}`);p.width=t.width||0,p.height=t.height||0,p.left=t.left||0,null==o||o.addItem({uid:l,elementRect:p,name:e.name})}catch(t){if(g>10)return void(g=0);g++,setTimeout((()=>{y()}),150)}};return c((()=>{f((()=>{setTimeout((()=>{y()}),200)}))})),h((()=>{null==o||o.removeItem(l)})),{componentId:s,isActive:d,hasBadge:b,itemClickEvent:()=>{e.disabled||(a("click"),null==o||o.setActiveItem(l))}}})(t),{ns:g,tabsItemClass:y,tabsItemStyle:S}=((e,t)=>{const a=l("tabs-item"),o=n(J),u=i((()=>e.color||(null==o?void 0:o.color))),c=i((()=>e.activeColor||(null==o?void 0:o.activeColor))),f=i((()=>d(null==o?void 0:o.activeBold,!0))),h=i((()=>e.activeFontSize||(null==o?void 0:o.activeFontSize))),[v,m]=s(u,"text"),[b,p]=s(c,"text"),g=i((()=>{const e=[a.b()];return t.value?(b.value&&e.push(b.value),f.value&&e.push(a.m("bold"))):v.value&&e.push(v.value),(null==o?void 0:o.scroll)&&e.push(a.m("scroll")),(null==o?void 0:o.showBar)||e.push(a.is("no-bar")),e.join(" ")})),y=i((()=>{const a={};return t.value?(b.value||(a.color=p.value||"var(--tn-color-primary)"),h.value&&(a.fontSize=r(h.value))):v.value||(a.color=m.value||"var(--tn-text-color-primary)"),(e.fontSize||(null==o?void 0:o.fontSize))&&(a.fontSize=r(e.fontSize||(null==o?void 0:o.fontSize)||"")),a}));return{ns:a,tabsItemClass:g,tabsItemStyle:y}})(t,o);return(e,t)=>{const l=L;return x(),$(l,{id:B(a),class:z([B(y)]),style:j(B(S)),onClick:O(B(p),["stop"])},{default:k((()=>[F(e.$slots,"default",{},(()=>[A(l,{class:z([B(g).e("content")])},{default:k((()=>[A(l,{class:z([B(g).e("content__value")])},{default:k((()=>[B(b)?(x(),$(H,{key:0,value:e.badgeConfig.value,dot:e.badgeConfig.dot,size:e.badgeConfig.dot?"16":"",type:"danger",onClick:B(p)},null,8,["value","dot","size","onClick"])):T("",!0),q(" "+E(e.title),1)])),_:1},8,["class"])])),_:1},8,["class"])]),!0)])),_:3},8,["id","class","style","onClick"])}}}),[["__scopeId","data-v-4e481133"]]);export{P as T,Q as a};

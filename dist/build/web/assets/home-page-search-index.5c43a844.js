import{a5 as e,a6 as a,b as t,a7 as l,i as o,u as s,a as n,t as r,c as u,r as c,w as i,n as d,s as h,v as p,B as v,z as g,y as m,A as f,C,D as y,F as b,T as k,E as B,I as _,J as x,x as w,Y as j,K as I,G as S,H as V,a8 as E,_ as H,a9 as T,aa as F,ab as D,ac as z,a4 as A,ad as N,N as R,R as U}from"./index-2f3d7a21.js";import{U as $,C as q}from"./event.66482612.js";import{T as L}from"./index.79f05a47.js";import{A as O}from"./index.22dc2c06.js";const P=t({modelValue:{type:String,default:""},placeholder:{type:String,default:"请输入搜索内容"},placeholderIcon:{type:String,default:"search"},shape:{type:String,values:["square","round"],default:"square"},size:l,textColor:String,placeholderColor:String,textAlign:{type:String,values:["left","center","right"],default:"left"},border:{type:Boolean,default:!0},borderColor:String,focus:Boolean,disabled:Boolean,clearable:{type:Boolean,default:!0},searchButton:{type:Boolean,default:!0},searchButtonText:{type:String,default:"搜 索"},searchButtonTextColor:String,searchButtonBgColor:String,throllte:{type:Boolean,default:!0},throllteTime:{type:Number,default:1e3}}),G=(t,l)=>{const o=c(!t.modelValue),s=c(t.modelValue);i((()=>t.modelValue),(e=>{t.modelValue!==s.value&&(s.value=e,o.value=!e)}));const n=c(!1);t.focus&&(o.value=!1,d((()=>{n.value=!0})));const r=()=>{l($,s.value),d((()=>{l(q,s.value),l("input",s.value)}))},u=t.throllte?function(t,l,o){let s=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(o)&&(s="leading"in o?!!o.leading:s,n="trailing"in o?!!o.trailing:n),a(t,l,{leading:s,maxWait:l,trailing:n})}(r,t.throllteTime):r,h=a((()=>{t.disabled||l("search",s.value)}),250);return{showPlaceholder:o,inputValue:s,inputFocus:n,searchBoxClickEvent:()=>{l("click"),t.disabled||(o.value=!1,n.value=!0)},inputFocusEvent:()=>{l("focus")},inputBlurEvent:()=>{o.value=!s.value,n.value=!1,l("blur")},inputValueEvent:u,clearClickEvent:()=>{s.value="",l($,""),d((()=>{n.value=!0,l(q,""),l("clear")}))},searchBtnClickEvent:h}},J=H(h({__name:"search-box",props:P,emits:{[$]:e=>o(e),[q]:e=>o(e),input:e=>o(e),click:()=>!0,focus:()=>!0,blur:()=>!0,search:e=>o(e),clear:()=>!0},setup(e,{emit:a}){const t=e,{showPlaceholder:l,inputValue:o,inputFocus:c,searchBoxClickEvent:i,inputFocusEvent:d,inputBlurEvent:h,inputValueEvent:H,clearClickEvent:T,searchBtnClickEvent:F}=G(t,a),{ns:D,searchBoxClass:z,searchBoxStyle:A,placeholderClass:N,placeholderStyle:R,searchButtonClass:U,searchButtonStyle:$}=(e=>{const a=s("search-box"),[t,l]=n(r(e,"textColor"),"text"),[o,c]=n(r(e,"borderColor"),"border"),[i,d]=n(r(e,"placeholderColor"),"text"),[h,p]=n(r(e,"searchButtonTextColor"),"text"),[v,g]=n(r(e,"searchButtonBgColor"),"bg"),m=u((()=>{const l=[a.b(),a.m(e.shape),a.is("no-search-btn",!e.searchButton),a.is("disabled",e.disabled)];return e.border&&(l.push(a.m("border")),o.value&&l.push(o.value)),e.size&&l.push(a.m(e.size)),t.value&&l.push(t.value),l.join(" ")})),f=u((()=>{const a={};return t.value||(a.color=l.value||"var(--tn-text-color-primary)"),e.border&&(o.value||(a.borderColor=c.value||"var(--tn-color-gray)")),a})),C=u((()=>{const t=[a.e("placeholder"),a.em("placeholder",e.textAlign)];return i.value&&t.push(i.value),t.join(" ")})),y=u((()=>{const e={};return i.value||(e.color=d.value||"var(--tn-text-color-secondary)"),e})),b=u((()=>{const e=[a.e("search-button")];return v.value&&e.push(v.value),h.value&&e.push(h.value),e.join(" ")})),k=u((()=>{const e={};return v.value||(e.backgroundColor=g.value||"var(--tn-color-primary)"),p.value?e.color=p.value:v.value||h.value||(e.color="var(--tn-color-white)"),e}));return{ns:a,searchBoxClass:m,searchBoxStyle:f,placeholderClass:C,placeholderStyle:y,searchButtonClass:b,searchButtonStyle:k}})(t);return(e,a)=>{const t=V,s=E;return p(),v(t,{class:C([f(z)]),style:y(f(A)),onClick:I(f(i),["stop"])},{default:g((()=>[m(t,{class:C([f(D).e("content")])},{default:g((()=>[f(l)?(p(),v(t,{key:0,class:C([f(N)]),style:y(f(R))},{default:g((()=>[b(e.$slots,"placeholder",{},(()=>[e.placeholderIcon?(p(),v(t,{key:0,class:C([f(D).e("placeholder-icon")])},{default:g((()=>[m(k,{name:e.placeholderIcon},null,8,["name"])])),_:1},8,["class"])):B("",!0),e.placeholder?(p(),v(t,{key:1,class:C([f(D).e("placeholder-text")])},{default:g((()=>[_(x(e.placeholder),1)])),_:1},8,["class"])):B("",!0)]),!0)])),_:3},8,["class","style"])):(p(),w(S,{key:1},[m(s,{modelValue:f(o),"onUpdate:modelValue":a[0]||(a[0]=e=>j(o)?o.value=e:null),class:C([f(D).e("input"),f(D).em("input",e.textAlign)]),focus:f(c),"confirm-type":"search",onFocus:f(d),onBlur:f(h),onInput:f(H),onConfirm:f(F)},null,8,["modelValue","class","focus","onFocus","onBlur","onInput","onConfirm"]),e.clearable&&f(o)?(p(),v(t,{key:0,class:C([f(D).e("clear-button")]),onClick:I(f(T),["stop"])},{default:g((()=>[m(k,{name:"close-fill"})])),_:1},8,["class","onClick"])):B("",!0)],64))])),_:3},8,["class"]),e.searchButton?(p(),v(t,{key:0,class:C([f(U)]),style:y(f($)),"hover-class":"tn-u-btn-hover","hover-stay-time":150,onClick:I(f(F),["stop"])},{default:g((()=>[b(e.$slots,"search",{},(()=>[_(x(e.searchButtonText),1)]),!0)])),_:3},8,["class","style","onClick"])):B("",!0)])),_:3},8,["class","style","onClick"])}}}),[["__scopeId","data-v-d25b03d6"]]),K={set(e,a){T(e,a)},get(e){try{const a=F(e);if(!a)return;return a}catch(a){return void console.error("获取数据缓存失败",a)}},remove(e){D(e)},clear(){z()}},W="searchHistory",Y=H(h({__name:"index",setup(e){const{navbarHeight:a,searchValue:t,historyList:l,searchResult:o,navbarInitFinishHandle:s,searchConfirmHandle:n,historyClickHandle:r,clearHistory:u}=(()=>{const e=c(0),a=c(""),t=c([]),l=c([{id:"1",title:"小程序官网源码，已上线",desc:"小程序前端源码，欢迎白嫖嗷嗷，可以的话给个 star 哈，还可以一件三连的哈哈哈哈哈",mainImage:"https://resource.tuniaokj.com/images/blogger/avatar_1.jpeg",tag:"小程序",viewCount:998,likeCount:100},{id:"2",title:"一个拥有大量3D模型的网站",desc:"喜欢3D模型的不了解一下?",mainImage:"https://resource.tuniaokj.com/images/blogger/avatar_2.jpeg",tag:"模型",viewCount:467,likeCount:239},{id:"3",title:"小程序官网源码，已上线",desc:"小程序前端源码，欢迎白嫖嗷嗷，可以的话给个 star 哈，还可以一件三连的哈哈哈哈哈",mainImage:"https://resource.tuniaokj.com/images/blogger/avatar_1.jpeg",tag:"小程序",viewCount:998,likeCount:100},{id:"4",title:"一个拥有大量3D模型的网站",desc:"喜欢3D模型的不了解一下?",mainImage:"https://resource.tuniaokj.com/images/blogger/avatar_2.jpeg",tag:"模型",viewCount:467,likeCount:239},{id:"5",title:"小程序官网源码，已上线",desc:"小程序前端源码，欢迎白嫖嗷嗷，可以的话给个 star 哈，还可以一件三连的哈哈哈哈哈",mainImage:"https://resource.tuniaokj.com/images/blogger/avatar_1.jpeg",tag:"小程序",viewCount:998,likeCount:100},{id:"6",title:"一个拥有大量3D模型的网站",desc:"喜欢3D模型的不了解一下?",mainImage:"https://resource.tuniaokj.com/images/blogger/avatar_2.jpeg",tag:"模型",viewCount:467,likeCount:239}]),o=e=>{t.value.includes(e)||(t.value.length>=10&&t.value.pop(),t.value.unshift(e),K.set(W,t.value))};return A((()=>{const e=K.get(W);e&&(t.value=e)})),{searchValue:a,navbarHeight:e,historyList:t,searchResult:l,navbarInitFinishHandle:a=>{e.value=a.height},searchConfirmHandle:()=>{a.value&&o(a.value)},historyClickHandle:e=>{a.value=e},clearHistory:()=>{N({title:"提示",content:"确认清除搜索历史记录吗?",showCancel:!0,success:({confirm:e})=>{e&&(t.value=[],K.remove(W))}})}}})();return(e,c)=>{const i=U("TnNavbar"),d=V,h=U("TnButton");return p(),w(S,null,[m(i,{fixed:"","bg-color":"transparent","bottom-shadow":!1,placeholder:!1,onInitFinish:f(s)},null,8,["onInitFinish"]),m(d,{class:"search-page",style:y({paddingTop:`${f(a)+20}px`})},{default:g((()=>[m(d,{class:"search-operation"},{default:g((()=>[m(d,{class:"input"},{default:g((()=>[m(J,{modelValue:f(t),"onUpdate:modelValue":c[0]||(c[0]=e=>j(t)?t.value=e:null),"search-button":!1,shape:"round",size:"sm",onSearch:f(n)},null,8,["modelValue","onSearch"])])),_:1}),m(d,{class:"button"},{default:g((()=>[m(h,{"bg-color":"tn-blue",shape:"round",width:"150",height:"66",onClick:f(n)},{default:g((()=>[_(" 搜 索 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),f(l).length>0?(p(),v(d,{key:0,class:"history-list"},{default:g((()=>[m(L,{title:"最近搜索","sub-title":"","operation-title":"删除","operation-icon":"delete",onOperation:f(u)},null,8,["onOperation"]),m(d,{class:"content-wrapper"},{default:g((()=>[(p(!0),w(S,null,R(f(l),((e,a)=>(p(),v(d,{key:a,class:"history-item tn-gray-light_bg",onClick:I((a=>f(r)(e)),["stop"])},{default:g((()=>[_(" # "+x(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):B("",!0),f(o).length>0?(p(),v(d,{key:1,class:"search-result"},{default:g((()=>[m(L,{title:"搜索结果","sub-title":""},{operation:g((()=>[m(d)])),_:1}),m(d,{class:"content-wrapper"},{default:g((()=>[(p(!0),w(S,null,R(f(o),((e,a)=>(p(),v(d,{key:a,class:"result-item"},{default:g((()=>[m(O,{title:e.title,desc:e.desc,image:e.mainImage,tag:e.tag,"view-count":e.viewCount,"like-count":e.likeCount},null,8,["title","desc","image","tag","view-count","like-count"])])),_:2},1024)))),128))])),_:1})])),_:1})):B("",!0)])),_:1},8,["style"])],64)}}}),[["__scopeId","data-v-14447873"]]);export{Y as default};

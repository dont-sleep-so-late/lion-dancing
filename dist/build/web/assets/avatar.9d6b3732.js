import{b as l,d as o,ap as a,ak as e,aq as n,e as i,c as u,a0 as r,L as d,u as t,a as v,W as s,f as g,r as c,n as b,q as C,j as p,m as f,s as m,v as h,B as y,z,C as S,A as w,y as x,T as I,F as k,ar as _,as as j,D as B,Q as G,H as M,_ as T}from"./index-2f3d7a21.js";import{T as $}from"./badge.28cd7eaf.js";import{u as N}from"./index.a1a6e970.js";const q=Symbol("avatarGroupContextKey"),F=l({url:String,icon:String,iconConfig:{type:o(Object),default:()=>({})},type:{type:String,values:a,default:""},size:{type:[String,Number]},shape:{type:String,values:["circle","square"],default:"circle"},imgMode:{type:String,values:e,default:"aspectFill"},bgColor:String,border:n,borderColor:String,borderBold:n,shadow:n,shadowColor:String,badge:{type:[String,Number]},badgeConfig:{type:o(Object),default:()=>({})}}),L=l=>{const o=i(q,void 0);return{type:u((()=>r(null==l?void 0:l.type,null==o?void 0:o.type,""))),size:u((()=>r(null==l?void 0:l.size,null==o?void 0:o.size,""))),shape:u((()=>r(null==l?void 0:l.shape,null==o?void 0:o.shape,"circle"))),imgMode:u((()=>r(null==l?void 0:l.imgMode,null==o?void 0:o.imgMode,"aspectFill"))),bgColor:u((()=>r(null==l?void 0:l.bgColor,null==o?void 0:o.bgColor,"tn-gray-light"))),border:u((()=>r(null==l?void 0:l.border,null==o?void 0:o.border,!1))),borderColor:u((()=>r(null==l?void 0:l.borderColor,null==o?void 0:o.borderColor,""))),borderBold:u((()=>r(null==l?void 0:l.borderBold,null==o?void 0:o.borderBold,!1))),shadow:u((()=>r(null==l?void 0:l.shadow,null==o?void 0:o.shadow,!1))),shadowColor:u((()=>r(null==l?void 0:l.shadowColor,null==o?void 0:o.shadowColor,""))),avatarGap:u((()=>{let l=Number(d(null==o?void 0:o.gap,0));return l<0&&(l=0),l>1&&(l=1),l}))}},P=T(m({__name:"avatar",props:F,emits:{click:()=>!0},setup(l,{emit:o}){const a=l,{componentId:e,avatarGroupIndex:n,avatarWidth:m,avatarClick:T}=((l,o)=>{const a=f(),{uid:e}=a,n=i(q,void 0);null==n||n.addItem({uid:e});const r=`ta-${p()}`,{getSelectorNodeInfo:t}=N(a),v=u((()=>d(null==n?void 0:n.avatarItems.length,0))),s=c(-1);b((()=>{const l=null==n?void 0:n.avatarItems.findIndex((l=>l.uid===e));s.value=d(l,-1),g.value||-1===s.value||h()}));const g=c(0);let m=0;const h=async()=>{try{const l=await t(`#${r}`);if(!l.width)throw new Error("获取头像宽度信息失败");g.value=l.width||0}catch(l){if(m>10)return void(m=0);m++,setTimeout((()=>{h()}),150)}};return C((()=>{null==n||n.removeItem(e)})),{componentId:r,groupAvatarCount:v,avatarGroupIndex:s,avatarWidth:g,avatarClick:()=>{null==n||n.handleItemClick(e),o("click")}}})(0,o),{ns:F,avatarClass:P,avatarStyle:W}=((l,o,a)=>{const e=t("avatar"),{type:n,size:i,shape:r,bgColor:d,border:c,borderColor:b,shadow:C,shadowColor:p,avatarGap:f}=L(l),[m,h]=v(d,"bg"),[y,z]=v(b,"border"),[S]=v(p,"shadow"),{sizeType:w}=s(i.value),x=u((()=>{const l=[];return l.push(e.b()),n.value&&l.push(`tn-type-${n.value}_bg`),!n.value&&m.value&&l.push(m.value),"inner"===w.value&&l.push(e.m(i.value)),r.value&&l.push(e.m(r.value)),c.value&&(l.push("tn-border"),y.value&&l.push(y.value)),C.value&&(l.push("tn-shadow"),S.value&&l.push(S.value)),l.join(" ")})),I=u((()=>{const l={};return"custom"===w.value&&(l.width=g(i.value),l.height=l.width),h.value&&(l.backgroundColor=h.value),c.value&&z.value&&(l.borderColor=z.value),-1!=o.value&&(l.zIndex=o.value+1,o.value>0?l.marginLeft=`calc(-${a.value*f.value}px)`:l.marginLeft="0px"),l}));return{ns:e,avatarClass:x,avatarStyle:I}})(a,n,m),{imgMode:A}=L(a),{iconSize:O,iconColor:D,iconBold:E}=(l=>{const o=i(q,void 0);return{iconColor:u((()=>{var a;return(null==l?void 0:l.color)||(null==(a=null==o?void 0:o.iconConfig)?void 0:a.color)||""})),iconSize:u((()=>{var a;return(null==l?void 0:l.size)||(null==(a=null==o?void 0:o.iconConfig)?void 0:a.size)||""})),iconBold:u((()=>{var a;return(null==l?void 0:l.bold)||(null==(a=null==o?void 0:o.iconConfig)?void 0:a.bold)||!1}))}})(a.iconConfig),{badgeConfig:H}=(l=>{const o=i(q,void 0),a=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.max,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.max)})),e=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.type,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.type,"primary")})),n=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.bgColor,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.bgColor)})),d=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.textColor,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.textColor)})),t=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.fontSize,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.fontSize)})),v=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.size,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.size)})),s=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.bold,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.bold,!1)})),g=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.dot,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.dot,!1)})),c=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.absolutePosition,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.absolutePosition,{})})),b=u((()=>{var a,e;return r(null==(a=null==l?void 0:l.badgeConfig)?void 0:a.absoluteCenter,null==(e=null==o?void 0:o.badgeConfig)?void 0:e.absoluteCenter,!0)}));return{badgeConfig:u((()=>({value:l.badge,max:a.value,type:e.value,bgColor:n.value,textColor:d.value,fontSize:t.value,size:v.value,bold:s.value,customClass:"",customStyle:{},dot:g.value,absolute:!0,absolutePosition:c.value,absoluteCenter:b.value,index:""})))}})(a);return(l,o)=>{const a=G,n=M;return h(),y(n,{id:w(e),class:S([w(P)]),style:B(w(W)),onClick:w(T)},{default:z((()=>[l.url?(h(),y(n,{key:0,class:S([w(F).e("image")])},{default:z((()=>[x(a,{class:"image",src:l.url,mode:w(A)},null,8,["src","mode"])])),_:1},8,["class"])):l.icon?(h(),y(n,{key:1,class:S([w(F).e("icon")])},{default:z((()=>[x(I,{name:l.icon,color:w(D),size:w(O),bold:w(E)},null,8,["name","color","size","bold"])])),_:1},8,["class"])):(h(),y(n,{key:2,class:S([w(F).e("custom")])},{default:z((()=>[k(l.$slots,"default",{},void 0,!0)])),_:3},8,["class"])),x($,_(j(w(H))),null,16)])),_:3},8,["id","class","style","onClick"])}}}),[["__scopeId","data-v-b0a0329e"]]);export{P as T,q as a,F as b};

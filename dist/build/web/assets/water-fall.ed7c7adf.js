import{b as a,r as e,w as t,j as s,n as l,m as n,s as i,u as r,v as o,B as c,z as d,y as u,x as f,N as h,A as m,G as p,C as g,H as v,F as _,_ as y}from"./index-77323780.js";import{c as w}from"./clone-deep.2124c060.js";import{u as x}from"./index.070e5df5.js";const $=a({data:{type:Array,default:()=>[]},mode:{type:String,values:["normal","calc"],default:"normal"}}),j=y(i({__name:"water-fall",props:$,setup(a,{expose:i}){const y=a,$=r("water-fall"),{componentId:j,leftData:D,rightData:I,resetWaterFall:A}=(a=>{const i=n(),r=`twf-${s()}`,{getSelectorNodeInfo:o}=x(i),c=e([]),d=e([]);let u=0,f=0;const h=async()=>{try{const a=await o(`#${r}-left`),e=await o(`#${r}-right`);u=a.height||u,f=e.height||f}catch(a){}};let m=[];const p=async e=>{if(e&&e.length)if("calc"===a.mode)await h(),u<=f?c.value.push(e.shift()):d.value.push(e.shift()),l((()=>{setTimeout((()=>{p(e)}),200)}));else if("normal"===a.mode){let a=!0;await h(),c.value.length>d.value.length&&(a=!1);let t=!1;u<f&&(t=!0),e.forEach(((e,s)=>{s%2==0&&a||t?c.value.push(e):d.value.push(e),a||(a=!0),t&&s>=2&&(t=!1)}))}};return t((()=>a.data),(a=>{if(!a)return;if(m.length===a.length)return;const e=w(a.slice(m.length));e.length||(c.value=[],d.value=[],u=0,f=0),l((()=>{m=a,p(e)}))}),{immediate:!0}),{componentId:r,leftData:c,rightData:d,resetWaterFall:()=>{a.data&&(c.value=[],d.value=[],u=0,f=0,l((()=>{m=a.data,p(a.data)})))}}})(y);return i({reset:A}),(a,e)=>{const t=v;return o(),c(t,{class:g([m($).b()])},{default:d((()=>[u(t,{id:`${m(j)}-left`,class:g(["left",[m($).e("container")]])},{default:d((()=>[(o(!0),f(p,null,h(m(D),((e,s)=>(o(),c(t,{key:s,class:g([m($).e("item")])},{default:d((()=>[_(a.$slots,"left",{item:e,index:s},void 0,!0)])),_:2},1032,["class"])))),128))])),_:3},8,["id","class"]),u(t,{id:`${m(j)}-right`,class:g(["right",[m($).e("container")]])},{default:d((()=>[(o(!0),f(p,null,h(m(I),((e,s)=>(o(),c(t,{key:s,class:g([m($).e("item")])},{default:d((()=>[_(a.$slots,"right",{item:e,index:s},void 0,!0)])),_:2},1032,["class"])))),128))])),_:3},8,["id","class"])])),_:3},8,["class"])}}}),[["__scopeId","data-v-1f26da28"]]);export{j as T};
